<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Home</title>

<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<style>
:root{
  --nav-h:88px;
}

html,body{
  margin:0;
  height:100%;
  overflow:hidden;
  background:#022c22;
}

/* ================= LAYOUT ================= */
.main{
  height:calc(100vh - var(--nav-h));
  margin-top:var(--nav-h);
  display:flex;
  align-items:center;
  justify-content:center;
  perspective:1600px;
}

/* ================= CAROUSEL ================= */
.slider{
  position:relative;
  width:220px;
  height:330px;
  transform-style:preserve-3d;
  animation:spin 100s linear infinite;
}

@keyframes spin{
  from{transform:rotateY(0deg);}
  to{transform:rotateY(360deg);}
}

.main:hover .slider{
  animation-play-state:paused;
}

.item{
  position:absolute;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  backface-visibility:hidden;
}

/* CRITICAL: no forced scaling */
.item img{
  max-width:220px;
  max-height:330px;
  width:auto;
  height:auto;

  background:#fff;
  border-radius:16px;
  border:2px solid #10b981;
  box-shadow:0 20px 40px rgba(0,0,0,.45);

  /* Pixelation fix */
  image-rendering:crisp-edges;
  transform:translateZ(0);
  will-change:transform;
  cursor:pointer;
}

/* ================= MODAL ================= */
#imageModal{
  background:rgba(0,0,0,.85);
  backdrop-filter:blur(8px);
}
</style>
</head>

<body>

<!-- NAV -->
<nav class="fixed top-0 left-0 right-0 h-[88px] bg-white border-b shadow z-40 px-8 flex items-center justify-between">
  <div class="flex items-center gap-4">
    <img src="https://i.imgur.com/VbZKWAf.png" class="h-10">
    <span class="font-black text-xs uppercase">Staff Portal</span>
  </div>
  <button id="logoutBtn"
    class="text-xs font-bold uppercase bg-gray-100 hover:bg-red-50 hover:text-red-600 px-5 py-2 rounded-xl border">
    Sign Out
  </button>
</nav>

<!-- MAIN -->
<div class="main">
  <div class="slider" id="slider"></div>
</div>

<!-- MODAL -->
<div id="imageModal" class="fixed inset-0 hidden items-center justify-center z-50">
  <div class="relative max-w-5xl w-full p-6">
    <button id="closeModal" class="absolute top-2 right-4 text-white text-3xl">&times;</button>
    <img id="modalImg" class="w-full max-h-[85vh] object-contain bg-white p-4 rounded-xl">
  </div>
</div>

<script>
document.addEventListener("DOMContentLoaded",()=>{

/* AUTH */
const supabase=window.supabase.createClient(
  "https://xpdtzvxjlguhcxkgowsg.supabase.co",
  "sb_publishable_KOm1sD7eOBpbJ_CiYtKL8w_RykN3krN"
);

supabase.auth.onAuthStateChange((_,s)=>{ if(!s) location.href="index.html"; });
logoutBtn.onclick=async()=>{ await supabase.auth.signOut(); location.href="index.html"; };

/* IMAGES */
const images=[ /* your 20 URLs unchanged */ ];

const slider=document.getElementById("slider");

/* Radius tuned for 1366x768 */
const radius=520;
const step=360/images.length;

images.forEach((src,i)=>{
  const d=document.createElement("div");
  d.className="item";
  d.style.transform=`rotateY(${i*step}deg) translateZ(${radius}px)`;

  const img=new Image();
  img.src=src;

  img.onclick=()=>{
    modalImg.src=src;
    imageModal.classList.remove("hidden");
    imageModal.classList.add("flex");
  };

  d.appendChild(img);
  slider.appendChild(d);
});

/* MODAL */
closeModal.onclick=()=>imageModal.classList.add("hidden");
imageModal.onclick=e=>{ if(e.target===imageModal) imageModal.classList.add("hidden"); };
});
</script>

</body>
</html>
