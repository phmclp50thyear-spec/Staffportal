<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Staff Portal | Home</title>

<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<style>
:root{
  --corp-green:#007941;
  --corp-light:#10b981;
}

body{
  margin:0;
  height:100vh;
  background:radial-gradient(circle at center,#064e3b 0%,#022c22 100%);
  font-family:ui-sans-serif,system-ui;
  overflow:hidden;
}

/* ================= CAROUSEL ================= */
.banner{
  height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  perspective:2000px;
}

.slider{
  position:relative;
  width:clamp(180px,20vw,260px);
  height:clamp(260px,35vh,420px);
  transform-style:preserve-3d;
  animation:spin 80s linear infinite;
}

@keyframes spin{
  from{transform:rotateY(0deg);}
  to{transform:rotateY(360deg);}
}

.banner:hover .slider{
  animation-play-state:paused;
}

.item{
  position:absolute;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  backface-visibility:hidden;
}

.item img{
  width:100%;
  height:100%;
  object-fit:contain;             /* no cropping, no blur */
  background:#fff;
  border-radius:18px;
  border:2px solid var(--corp-light);
  box-shadow:0 30px 70px rgba(0,0,0,.35);
  cursor:pointer;

  /* CRITICAL: prevents pixel blur */
  image-rendering:auto;
  transform:translateZ(0);
}

/* ================= MODAL ================= */
#imageModal{
  background:rgba(0,0,0,.85);
  backdrop-filter:blur(10px);
}
</style>
</head>

<body>

<!-- NAV -->
<nav class="bg-white shadow-md border-b border-gray-200 fixed w-full z-40 px-8 py-4">
  <div class="max-w-7xl mx-auto flex justify-between items-center">
    <div class="flex items-center gap-4">
      <img src="https://i.imgur.com/VbZKWAf.png" class="h-10"/>
      <h1 class="font-black text-gray-900 uppercase text-sm">Staff Terminal</h1>
    </div>
    <div class="hidden md:flex gap-8">
      <a class="text-xs font-bold uppercase text-emerald-700 border-b-2 border-emerald-700">Home</a>
      <a href="dashboard.html" class="text-xs font-bold uppercase text-gray-400">Records</a>
      <a href="reports.html" class="text-xs font-bold uppercase text-gray-400">Reports</a>
    </div>
    <button id="logoutBtn"
      class="bg-gray-100 hover:bg-red-50 hover:text-red-600 text-gray-600 px-5 py-2 rounded-xl text-[10px] font-bold uppercase border">
      Sign Out
    </button>
  </div>
</nav>

<!-- CAROUSEL -->
<div class="banner">
  <div class="slider" id="imageSlider"></div>
</div>

<!-- IMAGE MODAL -->
<div id="imageModal" class="fixed inset-0 hidden items-center justify-center z-50">
  <div class="relative max-w-6xl w-full p-6">
    <button id="closeModal"
      class="absolute top-2 right-4 text-white text-3xl font-black">&times;</button>
    <img id="modalImage"
      class="w-full max-h-[85vh] object-contain rounded-2xl bg-white p-4 shadow-2xl"/>
  </div>
</div>

<script>
document.addEventListener("DOMContentLoaded",()=>{

/* ===== SUPABASE ===== */
const supabase=window.supabase.createClient(
  "https://xpdtzvxjlguhcxkgowsg.supabase.co",
  "sb_publishable_KOm1sD7eOBpbJ_CiYtKL8w_RykN3krN"
);

supabase.auth.onAuthStateChange((_,session)=>{
  if(!session) location.replace("index.html");
});

document.getElementById("logoutBtn").onclick=async()=>{
  await supabase.auth.signOut();
  location.replace("index.html");
};

/* ===== IMAGES ===== */
const images=[
  "https://i.imgur.com/ZQEFR8A.jpeg","https://i.imgur.com/AnolGwk.png",
  "https://i.imgur.com/ulEsYqJ.jpeg","https://i.imgur.com/gcpa0h5.jpeg",
  "https://i.imgur.com/QyhSLel.jpeg","https://i.imgur.com/b3WI1PI.jpeg",
  "https://i.imgur.com/0VGmsYF.jpeg","https://i.imgur.com/jQ8mRfV.jpeg",
  "https://i.imgur.com/C53Uskn.jpeg","https://i.imgur.com/48gJAM5.jpeg",
  "https://i.imgur.com/fowtVc2.jpeg","https://i.imgur.com/9hZWDtL.jpeg",
  "https://i.imgur.com/QlssRn4.jpeg","https://i.imgur.com/kKfoQAo.jpeg",
  "https://i.imgur.com/vztjwUq.jpeg","https://i.imgur.com/XAEpSgA.jpeg",
  "https://i.imgur.com/d5CDOQR.jpeg","https://i.imgur.com/Vhk6wyX.jpeg",
  "https://i.imgur.com/Kkj3w4y.jpeg","https://i.imgur.com/tGBHQJM.jpeg"
];

const slider=document.getElementById("imageSlider");
const modal=document.getElementById("imageModal");
const modalImg=document.getElementById("modalImage");

/* Radius adapts to screen size + image count */
const baseRadius=Math.min(window.innerWidth,window.innerHeight)*0.9;
const radius=Math.max(baseRadius,(images.length*180)/Math.PI);

images.forEach((src,i)=>{
  const angle=(360/images.length)*i;
  const item=document.createElement("div");
  item.className="item";
  item.style.transform=`rotateY(${angle}deg) translateZ(${radius}px)`;

  const img=document.createElement("img");
  img.src=src;

  img.onclick=()=>{
    modalImg.src=src;
    modal.classList.remove("hidden");
    modal.classList.add("flex");
  };

  item.appendChild(img);
  slider.appendChild(item);
});

/* Modal close */
document.getElementById("closeModal").onclick=()=>modal.classList.add("hidden");
modal.onclick=e=>{ if(e.target===modal) modal.classList.add("hidden"); };
document.addEventListener("keydown",e=>{ if(e.key==="Escape") modal.classList.add("hidden"); });

});
</script>

</body>
</html>
